/*
 Hype Action Events 1.0.5
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeActionEvents"in window&&(window.HypeActionEvents=function(){function r(a){return a?w[a]:w}function z(a,g,p,d,k,c){if(-1!=r("MatterEvents").indexOf(k)&&g.querySelector("[data-"+c+"-action]"))Matter.Events.on(d,k,function(q){for(var b=q.pairs,l=0;l<b.length;l++){var n=document.getElementById(q.pairs[l].bodyA.elementId),h=document.getElementById(q.pairs[l].bodyB.elementId),e=n.getAttribute("data-"+c+"-action");e&&a.triggerAction(e,{element:n,event:Object.assign({type:q.name},q)});(e=h.getAttribute("data-"+
c+"-action"))&&a.triggerAction(e,{element:h,event:Object.assign({type:q.name},q)})}})}function A(a,g,p,d){g.querySelectorAll("["+d+"]").forEach(function(k){var c=k.getAttribute(d);c&&a.triggerAction(c,{element:k,event:p})})}function B(a,g,p){var d=a.getSymbolInstanceById(g.id);if("function"==typeof a.functions()[d.symbolName()])a.functions()[d.symbolName()](a,g,p)}var C="drag dragstart dragend dragover dragenter dragleave drop".split(" "),w={debug:!1,LegacyMode:!1,StrictMode:!1,MatterEvents:["collisionStart",
"collisionEnd","collisionActive"],DOMEvents:"mousedown mouseup click dblclick mouseover mousewheel mouseout contextmenu mousemove touchstart touchmove touchend touchcancel keydown keypress keyup focus blur change submit input beforeinput animationstart animationiteration animationend animationcancel transitionstart transitionrun transitionend transitioncancel pointerdown pointerup pointerover pointerout pointermove pointerenter pointerleave pointercancel".split(" ").concat(C),nonPassiveDOMEvents:C,
WindowEvents:"resize focus blur beforeprint afterprint error storage online offline hashchange popstate message wheel".split(" "),DocumentEvents:["visibilitychange","scroll","fullscreenchange"],ProxyHasNot:["$ctx","$doc","$sym","$elm","$evt"]},f={};!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,g,p){var d=document.getElementById(a.documentId());f[a.documentId()]={rO:{},iO:{},mO:{},rAFiD:null,rAFsF:0,
rAFtF:0,wE:{},dE:{}};r("DOMEvents").forEach(function(k){d.addEventListener(k,function(c){var q=c.target,b=c.type;q&&b&&(b=q.getAttribute("data-"+b+"-action"))&&a.triggerAction(b,{element:q,event:c})},{passive:-1==r("nonPassiveDOMEvents").indexOf(k)})});a.getSymbolInstance=function(k){for(var c=null;null==c&&null!=k;)c=a.getSymbolInstanceById(k.id),k=k.parentNode;return c};a.triggerAction=function(k,c){if(k){c=c||{};c=Object.assign({symbolInstance:a.getSymbolInstance(c.element),element:document.getElementById(a.currentSceneId()),
event:{}},c);var q=c.strictMode||r("StrictMode");if(!q){var b=Object.assign({},a,c.symbolInstance);if(r("LegacyMode")){var l={},n=a.functions();Object.keys(n).forEach(function(h){l[h]=n[h].bind(a,a,c.element,c.event)});b=Object.assign(b,l)}else b=new Proxy(b,{set:function(h,e,m,t){return Reflect.get(h,e,t)?Reflect.set(h,e,m,t):Reflect.set(a.customData,e,m)},get:function(h,e,m){var t=Reflect.get(a.functions(),e);return t?t.bind(a,a,c.element,c.event):(h=Reflect.get(h,e,m))?h:Reflect.get(a.customData,
e)},has:function(h,e,m){return-1!==r("ProxyHasNot").indexOf(e)?!1:h.hasOwnProperty(e)||window[e]?Reflect.has(h,e,m):!0}})}c.symbolInstance&&Object.assign(c.event,{symbolInstance:c.symbolInstance});try{return Function("$ctx","$doc","$sym","$elm","$evt",b?"with($ctx){"+k+"}":q?'"use strict";'+k:k)(b,a,c.symbolInstance,c.element,c.event)}catch(h){(r("debug")||-1!=window.location.href.indexOf("127.0.0.1:")&&-1!=window.location.href.indexOf("/preview/"))&&console.error("%c"+(c.errorMsg||"Hype Action Events Error")+
"%c"+(c.errorMsg?"":" version "+D.version)+"\n\n%c"+k+(c.omitError?"":"%c\n\n"+h+"\n\n"),"font-size:12px; font-weight:bold","font-size:8px","min-height:40px;display: inline-block; padding: 10px; background-color: rgba(255,255,255,0.25); border: 1px solid lightgray; border-radius: 4px; font-family:Monospace; font-size:12px","font-size:11px",c.element?c.element:"")}}};"function"==typeof a.functions().HypeActionEvents&&a.functions().HypeActionEvents(a,g,p)}});window.HYPE_eventListeners.push({type:"HypeLayoutRequest",
callback:function(a,g,p){A(a,g,p,"data-layout-request-action")}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,g,p){A(a,g,p,"data-scene-prepare-action")}});window.HYPE_eventListeners.push({type:"HypeSceneLoad",callback:function(a,g,p){var d=a.documentId(),k=document.getElementById(d);0!="Matter"in window&&r("MatterEvents")&&r("MatterEvents").length&&(k=a.getElementProperty(k,"physics-engine"),z(a,g,p,k,"collisionStart","collision-start"),z(a,g,p,k,"collisionActive",
"collision-active"),z(a,g,p,k,"collisionEnd","collision-end"));A(a,g,p,"data-scene-load-action");g.querySelectorAll("[data-resize-action]").forEach(function(b){f[d].rO[b.id]||(f[d].rO[b.id]=new ResizeObserver(function(n,h){var e=b.getAttribute("data-resize-action");e&&n.forEach(function(m,t){a.triggerAction(e,{element:b,event:{type:"ResizeObserver",entry:m,index:t,entries:n,observer:h}})})}));var l=b.getAttribute("data-resize-target");f[d].rO[b.id].observe(l||b)});g.querySelectorAll("[data-intersection-action]").forEach(function(b){if(!f[d].iO[b.id]){var l=
b.getAttribute("data-intersection-root"),n=b.getAttribute("data-intersection-margin"),h=b.getAttribute("data-intersection-threshold");h=h?h.replace(/\s\s+/g," ").split(" ").map(function(e){return-1!==e.indexOf("%")?parseFloat(e)/100:parseFloat(e)}):r("IntersectionTreshold")||null;f[d].iO[b.id]=new IntersectionObserver(function(e,m){var t=b.getAttribute("data-intersection-action");t&&e.forEach(function(u,x){var v=0;u.isIntersecting&&h&&(v=h.reduce(function(y,E){return Math.abs(E-u.intersectionRatio)<
Math.abs(y-u.intersectionRatio)?E:y}));a.triggerAction(t,{element:b,event:{type:"IntersectionObserver",entry:u,index:x,entries:e,observer:m,closestThreshold:v,closestThresholdPercent:100*v,isAbove:u.boundingClientRect.y<u.rootBounds.y}})})},{root:g.querySelector(l)||null,rootMargin:n||"0px",threshold:h||null})}l=b.getAttribute("data-intersection-target");f[d].iO[b.id].observe(l||b)});g.querySelectorAll("[data-mutation-action]").forEach(function(b){f[d].mO[b.id]||(f[d].mO[b.id]=new MutationObserver(function(t,
u){var x=b.getAttribute("data-mutation-action");x&&t.forEach(function(v,y){a.triggerAction(x,{element:b,event:{type:"MutationObserver",mutation:v,index:y,mutations:t,observer:u}})})}));var l="true"==b.getAttribute("data-mutation-child-list"),n="true"==b.getAttribute("data-mutation-attributes")||!0,h="true"==b.getAttribute("data-mutation-character-data"),e="true"==b.getAttribute("data-mutation-subtree"),m=b.getAttribute("data-mutation-attribute-filter");m=m?m.split(",").map(function(t){return t.trim()}):
r("AttributeFilter")||null;l={childList:l,attributes:n,characterData:h,subtree:e};m&&l.assign(l,{attributeFilter:m});m=b.getAttribute("data-mutation-target");f[d].mO[b.id].observe(m||b,l)});var c=g.querySelectorAll("[data-animation-frame-action]");if(c){f[d].rAFsF=0;var q=function(b){c.forEach(function(l){var n=l.getAttribute("data-animation-frame-action");n&&a.triggerAction(n,{element:l,event:{type:"AnimationFrame",time:b,sceneFrames:f[d].rAFsF++,totalFrames:f[d].rAFtF++}})});f[d].rAFiD=requestAnimationFrame(q)};
f[d].rAFiD=requestAnimationFrame(q)}r("WindowEvents").forEach(function(b){var l=g.querySelectorAll("[data-window-"+b+"-action]");l&&(f[d].wE[b]=function(n){var h=n.type;l.forEach(function(e){if(e&&h){var m=e.getAttribute("data-window-"+b+"-action");m&&a.triggerAction(m,{element:e,event:n})}})},window.addEventListener(b,f[d].wE[b],{passive:!0}))});r("DocumentEvents").forEach(function(b){var l=g.querySelectorAll("[data-document-"+b+"-action]");l&&(f[d].dE[b]=function(n){var h=n.type;l.forEach(function(e){if(e&&
h){var m=e.getAttribute("data-document-"+b+"-action");m&&a.triggerAction(m,{element:e,event:n})}})},document.addEventListener(b,f[d].dE[b],{passive:!0}))})}});window.HYPE_eventListeners.push({type:"HypeSceneUnload",callback:function(a,g,p){var d=a.documentId();g.querySelectorAll("[data-scene-unload-action]").forEach(function(c){var q=c.getAttribute("data-scene-unload-action");q&&a.triggerAction(q,{element:c,event:p})});for(var k in f[d].rO)g.querySelectorAll("[data-resize-action]").forEach(function(c){f[d].rO[k].unobserve(document.getElementById(c.id))});
for(k in f[d].iO)g.querySelectorAll("[data-intersection-action]").forEach(function(c){f[d].iO[k].unobserve(document.getElementById(c.id))});for(k in f[d].mO)f[d].mO[k].disconnect();f[d].rAFiD&&(cancelAnimationFrame(f[d].rAFiD),f[d].rAFiD=null);r("WindowEvents").forEach(function(c){f[d].wE[c]&&(window.removeEventListener(c,f[d].wE[c]),delete f[d].wE[c])});r("DocumentEvents").forEach(function(c){f[d].dE[c]&&(document.removeEventListener(c,f[d].dE[c]),delete f[d].dE[c])})}});window.HYPE_eventListeners.push({type:"HypeSymbolLoad",
callback:B});window.HYPE_eventListeners.push({type:"HypeSymbolUnload",callback:B});window.HYPE_eventListeners.push({type:"HypeTriggerCustomBehavior",callback:function(a,g,p){var d=p.customBehaviorName;/[;=()]/.test(d)&&a.triggerAction(d,{element:g,event:p})}});var D={version:"1.0.5",getDefault:r,setDefault:function(a,g){"object"==typeof a?w=a:w[a]=g}};return D}());
