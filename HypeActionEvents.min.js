/*
 Hype Action Events 1.0.2
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeActionEvents"in window&&(window.HypeActionEvents=function(){function m(a){return a?t[a]:t}function u(a,e,f,d,c,b){if(-1!=m("MatterEvents").indexOf(c))Matter.Events.on(d,c,function(k){for(var l=k.pairs,n=0;n<l.length;n++){var q=document.getElementById(k.pairs[n].bodyA.elementId),g=document.getElementById(k.pairs[n].bodyB.elementId),h=q.getAttribute("data-"+b+"-action");h&&a.triggerAction(h,{element:q,event:Object.assign({type:k.name},k)});(h=g.getAttribute("data-"+b+"-action"))&&a.triggerAction(h,
{element:g,event:Object.assign({type:k.name},k)})}})}function v(a,e,f){var d=a.getSymbolInstanceById(e.id);if("function"==typeof a.functions()[d.symbolName()])a.functions()[d.symbolName()](a,e,f)}var t={debug:!1,LegacyMode:!1,StrictMode:!1,MatterEvents:["collisionStart","collisionEnd","collisionActive"],DOMEvents:"mousedown mouseup click dblclick mouseover mousewheel mouseout contextmenu mousemove touchstart touchmove touchend touchcancel keydown keypress keyup focus blur change submit".split(" ")};
!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,e,f){var d=document.getElementById(a.documentId());m("DOMEvents").filter(function(c){d.addEventListener(c,function(b){var k=b.target,l=b.type;k&&l&&(l=k.getAttribute("data-"+l+"-action"))&&a.triggerAction(l,{element:k,event:b})})});a.getSymbolInstance=function(c){for(var b=null;null==b&&null!=c;)b=a.getSymbolInstanceById(c.id),c=c.parentNode;return b};a.triggerAction=
function(c,b){if(c){b=b||{};b=Object.assign({symbolInstance:a.getSymbolInstance(b.element),element:document.getElementById(a.currentSceneId()),event:{}},b);var k=b.strictMode||m("StrictMode");if(!k){var l=Object.assign({},a,b.symbolInstance);if(m("LegacyMode")){var n={},q=a.functions();Object.keys(q).forEach(function(g){n[g]=q[g].bind(a,a,b.element,b.event)});l=Object.assign(l,n)}else l=new Proxy(l,{set:function(g,h,p,r){return Reflect.get(g,h,r)?Reflect.set(g,h,p,r):Reflect.set(a.customData,h,p)},
get:function(g,h,p){var r=Reflect.get(a.functions(),h);return r?r.bind(a,a,b.element,b.event):(g=Reflect.get(g,h,p))?g:Reflect.get(a.customData,h)},has:function(g,h,p){return g.hasOwnProperty(h)||window[h]?Reflect.has(g,h,p):!0}})}try{return Function("$ctx","$doc","$sym","$elm","$evt",l?"with($ctx){"+c+"}":k?'"use strict";'+c:c)(l,a,b.symbolInstance,b.element,b.event)}catch(g){(m("debug")||-1!=window.location.href.indexOf("127.0.0.1:")&&-1!=window.location.href.indexOf("/preview/"))&&console.log((b.errorMsg||
"Hype Action Events Error")+(b.omitError?"":": "+g)+"\n\n"+c)}}};"function"==typeof a.functions().HypeActionEvents&&a.functions().HypeActionEvents(a,e,f)}});window.HYPE_eventListeners.push({type:"HypeLayoutRequest",callback:function(a,e,f){e.querySelectorAll("[data-layout-request-action]").forEach(function(d){var c=d.getAttribute("data-layout-request-action");c&&a.triggerAction(c,{element:d,event:f})})}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,e,f){e.querySelectorAll("[data-scene-prepare-action]").forEach(function(d){var c=
d.getAttribute("data-scene-prepare-action");c&&a.triggerAction(c,{element:d,event:f})})}});window.HYPE_eventListeners.push({type:"HypeSceneLoad",callback:function(a,e,f){if(0!="Matter"in window&&m("MatterEvents")&&m("MatterEvents").length){var d=document.getElementById(a.documentId());d=a.getElementProperty(d,"physics-engine");u(a,e,f,d,"collisionStart","collision-start");u(a,e,f,d,"collisionActive","collision-active");u(a,e,f,d,"collisionEnd","collision-end")}e.querySelectorAll("[data-scene-load-action]").forEach(function(c){var b=
c.getAttribute("data-scene-load-action");b&&a.triggerAction(b,{element:c,event:f})})}});window.HYPE_eventListeners.push({type:"HypeSceneUnload",callback:function(a,e,f){e.querySelectorAll("[data-scene-unload-action]").forEach(function(d){var c=d.getAttribute("data-scene-unload-action");c&&a.triggerAction(c,{element:d,event:f})})}});window.HYPE_eventListeners.push({type:"HypeSymbolLoad",callback:v});window.HYPE_eventListeners.push({type:"HypeSymbolUnload",callback:v});window.HYPE_eventListeners.push({type:"HypeTriggerCustomBehavior",
callback:function(a,e,f){var d=f.customBehaviorName;/[;=()]/.test(d)&&a.triggerAction(d,{element:e,event:f})}});return{version:"1.0.2",getDefault:m,setDefault:function(a,e){"object"==typeof a?t=a:t[a]=e}}}());
