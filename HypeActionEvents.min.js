/*
 Hype Action Events 1.0.6
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeActionEvents"in window&&(window.HypeActionEvents=function(){function r(a){return a?x[a]:x}function A(a,f,n,d,k,b){if(-1!=r("MatterEvents").indexOf(k)&&f.querySelector("[data-"+b+"-action]"))Matter.Events.on(d,k,function(q){for(var c=q.pairs,l=0;l<c.length;l++){var p=document.getElementById(q.pairs[l].bodyA.elementId),h=document.getElementById(q.pairs[l].bodyB.elementId),e=p.getAttribute("data-"+b+"-action");e&&a.triggerAction(e,{element:p,event:Object.assign({type:q.name},q)});(e=h.getAttribute("data-"+
b+"-action"))&&a.triggerAction(e,{element:h,event:Object.assign({type:q.name},q)})}})}function v(a,f,n,d){f.querySelectorAll("["+d+"]").forEach(function(k){var b=k.getAttribute(d);b&&a.triggerAction(b,{element:k,event:n})})}function B(a,f,n){var d=a.getSymbolInstanceById(f.id);if("function"==typeof a.functions()[d.symbolName()])a.functions()[d.symbolName()](a,f,n)}var C="drag dragstart dragend dragover dragenter dragleave drop".split(" "),x={debug:!1,LegacyMode:!1,StrictMode:!1,MatterEvents:["collisionStart",
"collisionEnd","collisionActive"],DOMEvents:"mousedown mouseup click dblclick mouseover mousewheel mouseout contextmenu mousemove touchstart touchmove touchend touchcancel keydown keypress keyup focus blur change submit input beforeinput animationstart animationiteration animationend animationcancel transitionstart transitionrun transitionend transitioncancel pointerdown pointerup pointerover pointerout pointermove pointerenter pointerleave pointercancel".split(" ").concat(C),nonPassiveDOMEvents:C,
WindowEvents:"resize focus blur beforeprint afterprint error storage online offline hashchange popstate message wheel".split(" "),DocumentEvents:["visibilitychange","scroll","fullscreenchange"],ProxyHasNot:"$ctx $doc $sym $elm $evt hypeDocument element event".split(" ")},g={};!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,f,n){var d=document.getElementById(a.documentId());g[a.documentId()]={rO:{},iO:{},
mO:{},rAFiD:null,rAFsF:0,rAFtF:0,wE:{},dE:{}};r("DOMEvents").forEach(function(k){d.addEventListener(k,function(b){var q=b.target,c=b.type;q&&c&&(c=q.getAttribute("data-"+c+"-action"))&&a.triggerAction(c,{element:q,event:b})},{passive:-1==r("nonPassiveDOMEvents").indexOf(k)})});a.getSymbolInstance=function(k){for(var b=null;null==b&&null!=k;)b=a.getSymbolInstanceById(k.id),k=k.parentNode;return b};a.triggerAction=function(k,b){if(k){b=b||{};b=Object.assign({symbolInstance:a.getSymbolInstance(b.element),
element:document.getElementById(a.currentSceneId()),event:{}},b);var q=b.strictMode||r("StrictMode");if(!q){var c=Object.assign({},a,b.symbolInstance);if(r("LegacyMode")){var l={},p=a.functions();Object.keys(p).forEach(function(h){l[h]=p[h].bind(a,a,b.element,b.event)});c=Object.assign(c,l)}else c=new Proxy(c,{set:function(h,e,m,t){return Reflect.get(h,e,t)?Reflect.set(h,e,m,t):Reflect.set(a.customData,e,m)},get:function(h,e,m){var t=Reflect.get(a.functions(),e);return t?t.bind(a,a,b.element,b.event):
(h=Reflect.get(h,e,m))?h:Reflect.get(a.customData,e)},has:function(h,e,m){return-1!==r("ProxyHasNot").indexOf(e)?!1:h.hasOwnProperty(e)||window[e]?Reflect.has(h,e,m):!0}})}b.symbolInstance&&Object.assign(b.event,{symbolInstance:b.symbolInstance});try{return Function("$ctx","$doc","$sym","$elm","$evt","hypeDocument","element","event",c?"with($ctx){"+k+"}":q?'"use strict";'+k:k)(c,a,b.symbolInstance,b.element,b.event,a,b.element,b.event)}catch(h){(r("debug")||-1!=window.location.href.indexOf("127.0.0.1:")&&
-1!=window.location.href.indexOf("/preview/"))&&console.error("%c"+(b.errorMsg||"Hype Action Events Error")+"%c"+(b.errorMsg?"":" version "+D.version)+"\n\n%c"+k+(b.omitError?"":"%c\n\n"+h+"\n\n"),"font-size:12px; font-weight:bold","font-size:8px","min-height:40px;display: inline-block; padding: 10px; background-color: rgba(255,255,255,0.25); border: 1px solid lightgray; border-radius: 4px; font-family:Monospace; font-size:12px","font-size:11px",b.element?b.element:"")}}};"function"==typeof a.functions().HypeActionEvents&&
a.functions().HypeActionEvents(a,f,n)}});window.HYPE_eventListeners.push({type:"HypeLayoutRequest",callback:function(a,f,n){v(a,f,n,"data-layout-request-action")}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,f,n){v(a,f,n,"data-scene-prepare-action")}});window.HYPE_eventListeners.push({type:"HypeSceneLoad",callback:function(a,f,n){var d=a.documentId(),k=document.getElementById(d);0!="Matter"in window&&r("MatterEvents")&&r("MatterEvents").length&&(k=a.getElementProperty(k,
"physics-engine"),A(a,f,n,k,"collisionStart","collision-start"),A(a,f,n,k,"collisionActive","collision-active"),A(a,f,n,k,"collisionEnd","collision-end"));v(a,f,n,"data-scene-load-action");f.querySelectorAll("[data-resize-action]").forEach(function(c){g[d].rO[c.id]||(g[d].rO[c.id]=new ResizeObserver(function(p,h){var e=c.getAttribute("data-resize-action");e&&p.forEach(function(m,t){a.triggerAction(e,{element:c,event:{type:"ResizeObserver",entry:m,index:t,entries:p,observer:h}})})}));var l=c.getAttribute("data-resize-target");
g[d].rO[c.id].observe(l||c)});f.querySelectorAll("[data-intersection-action]").forEach(function(c){if(!g[d].iO[c.id]){var l=c.getAttribute("data-intersection-root"),p=c.getAttribute("data-intersection-margin"),h=c.getAttribute("data-intersection-threshold");h=h?h.replace(/\s\s+/g," ").split(" ").map(function(e){return-1!==e.indexOf("%")?parseFloat(e)/100:parseFloat(e)}):r("IntersectionTreshold")||null;g[d].iO[c.id]=new IntersectionObserver(function(e,m){var t=c.getAttribute("data-intersection-action");
t&&e.forEach(function(u,y){var w=0;u.isIntersecting&&h&&(w=h.reduce(function(z,E){return Math.abs(E-u.intersectionRatio)<Math.abs(z-u.intersectionRatio)?E:z}));a.triggerAction(t,{element:c,event:{type:"IntersectionObserver",entry:u,index:y,entries:e,observer:m,closestThreshold:w,closestThresholdPercent:100*w,isAbove:u.boundingClientRect.y<u.rootBounds.y}})})},{root:f.querySelector(l)||null,rootMargin:p||"0px",threshold:h||null})}l=c.getAttribute("data-intersection-target");g[d].iO[c.id].observe(l||
c)});f.querySelectorAll("[data-mutation-action]").forEach(function(c){g[d].mO[c.id]||(g[d].mO[c.id]=new MutationObserver(function(t,u){var y=c.getAttribute("data-mutation-action");y&&t.forEach(function(w,z){a.triggerAction(y,{element:c,event:{type:"MutationObserver",mutation:w,index:z,mutations:t,observer:u}})})}));var l="true"==c.getAttribute("data-mutation-child-list"),p="true"==c.getAttribute("data-mutation-attributes")||!0,h="true"==c.getAttribute("data-mutation-character-data"),e="true"==c.getAttribute("data-mutation-subtree"),
m=c.getAttribute("data-mutation-attribute-filter");m=m?m.split(",").map(function(t){return t.trim()}):r("AttributeFilter")||null;l={childList:l,attributes:p,characterData:h,subtree:e};m&&l.assign(l,{attributeFilter:m});m=c.getAttribute("data-mutation-target");g[d].mO[c.id].observe(m||c,l)});var b=f.querySelectorAll("[data-animation-frame-action]");if(b){g[d].rAFsF=0;var q=function(c){b.forEach(function(l){var p=l.getAttribute("data-animation-frame-action");p&&a.triggerAction(p,{element:l,event:{type:"AnimationFrame",
time:c,sceneFrames:g[d].rAFsF++,totalFrames:g[d].rAFtF++}})});g[d].rAFiD=requestAnimationFrame(q)};g[d].rAFiD=requestAnimationFrame(q)}r("WindowEvents").forEach(function(c){var l=f.querySelectorAll("[data-window-"+c+"-action]");l&&(g[d].wE[c]=function(p){var h=p.type;l.forEach(function(e){if(e&&h){var m=e.getAttribute("data-window-"+c+"-action");m&&a.triggerAction(m,{element:e,event:p})}})},window.addEventListener(c,g[d].wE[c],{passive:!0}))});r("DocumentEvents").forEach(function(c){var l=f.querySelectorAll("[data-document-"+
c+"-action]");l&&(g[d].dE[c]=function(p){var h=p.type;l.forEach(function(e){if(e&&h){var m=e.getAttribute("data-document-"+c+"-action");m&&a.triggerAction(m,{element:e,event:p})}})},document.addEventListener(c,g[d].dE[c],{passive:!0}))})}});window.HYPE_eventListeners.push({type:"HypeSceneUnload",callback:function(a,f,n){var d=a.documentId();f.querySelectorAll("[data-scene-unload-action]").forEach(function(b){var q=b.getAttribute("data-scene-unload-action");q&&a.triggerAction(q,{element:b,event:n})});
for(var k in g[d].rO)f.querySelectorAll("[data-resize-action]").forEach(function(b){g[d].rO[k].unobserve(document.getElementById(b.id))});for(k in g[d].iO)f.querySelectorAll("[data-intersection-action]").forEach(function(b){g[d].iO[k].unobserve(document.getElementById(b.id))});for(k in g[d].mO)g[d].mO[k].disconnect();g[d].rAFiD&&(cancelAnimationFrame(g[d].rAFiD),g[d].rAFiD=null);r("WindowEvents").forEach(function(b){g[d].wE[b]&&(window.removeEventListener(b,g[d].wE[b]),delete g[d].wE[b])});r("DocumentEvents").forEach(function(b){g[d].dE[b]&&
(document.removeEventListener(b,g[d].dE[b]),delete g[d].dE[b])})}});window.HYPE_eventListeners.push({type:"HypeSymbolLoad",callback:B});window.HYPE_eventListeners.push({type:"HypeSymbolUnload",callback:B});window.HYPE_eventListeners.push({type:"HypeTriggerCustomBehavior",callback:function(a,f,n){var d=n.customBehaviorName;/[;=()]/.test(d)?a.triggerAction(d,{element:f,event:n}):(f=document.getElementById(a.currentSceneId()),v(a,f,n,"data-behavior-action"),d=n.customBehaviorName.replaceAll(/[^a-zA-Z0-9\s]/g,
"").replaceAll(/\s+/g,"-").toLowerCase(),v(a,f,n,"data-behavior-"+d+"-action"))}});var D={version:"1.0.6",getDefault:r,setDefault:function(a,f){"object"==typeof a?x=a:x[a]=f}};return D}());
